<!DOCTYPE html>
<html>
    <head>
        <title>
            DRAFT | CAU Map with 3 leaflet Layer selectors
        </title>
 
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
 
        <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
 
        <!-- <link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7/leaflet.css"/> -->
 
        <!-- <link rel="stylesheet" href="../src/leaflet-panel-layers.css" />    new -->

        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/themes/css/cartodb.css" type="text/css" /> 
 


    <!-- <script src="//cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script> -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <!-- <script src="../src/leaflet-panel-layers.js"></script>  new -->

  <style type="text/css">
            html, body, #map {
                height: 100%;
                padding: 0;
                margin: 0;
            }


/* leaflet style overrides */


    .leaflet-right .leaflet-control {
      float: right;
      }
    .leaflet-top .leaflet-control {
      margin-top: 10px;
      }
    .leaflet-bottom .leaflet-control {
      margin-bottom: 10px;
      }
    .leaflet-left .leaflet-control {
      margin-left: 10px;
      }
    .leaflet-right .leaflet-control {
      margin-right: 10px;
      }

.leaflet-control-layers-expanded {
      background: none repeat scroll 0 0 rgba(255, 255, 255, 0.9);
      border-radius: 5px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.9);
      font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
      padding: 30px 16px 6px 5px;   /* top, right, bottom, left */
      height: 120px;
      width: 165px;
      overflow: auto;    /* allows scrolling in selector */
    }

 .my-layer-item-bold {      /* black layer item */
       font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
       color: #000000;
       font-weight: 500;
}

 .my-layer-item-red {      /* red layer item */
       font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
       color: #800000;
}

 .my-layer-item-blue {      /* blue layer item */
       font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
       color: #045a8d;
}

 .my-layer-item-italic {      /* italic */
       font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
       font-style: italic;
       color: #74a9cf;
}





    .layer_titles {
        position: absolute;
        text-align: right;
       }

      .title-group1 {
        position: absolute;
        top: 14px;
        right: 18px;
       }
      .title-group2 {
        position: absolute;
        top: 178px;
        right: 18px;        
       }
      .title-group3 {
        position: absolute;
        top: 345px;
        right: 18px;        
       }


       .title {
        position: relative;
        font: 24px/1 'Open Sans';
        font-weight: 900;
        color: #000;
       }


.instructions {
        position: absolute;
        top: 10px;
        left: 50px;
      background: none repeat scroll 0 0 rgba(255, 255, 255, 0.8);
      border-radius: 5px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.9);
      font: 13px/1.4 "Helvetica Neue", Arial, Helvetica, sans-serif;
      padding: 1px 12px 4px 4px;   /* top, right, bottom, left */
      height: 47px;
      width: 200px;
      overflow: auto;    /* allows scrolling in selector */
    }

      .instruct_title {
        font: 18px/1.8 "Helvetica Neue", Arial, Helvetica, sans-serif;
        color: #000;
        font-weight: 900;
       }

      .instruct_text {
        font: 13px/1.4 "Helvetica Neue", Arial, Helvetica, sans-serif;
        color: #000;
       }




</style>
    </head>

    <body>
        <div id="map"></div>

        <div id="titles">
            <div class="title-group1"> 
                <p class="title">Boundaries</p>
            </div>
            <div class="title-group2"> 
                <p class="title">Demographics</p>
            </div>
            <div class="title-group3"> 
                <p class="title">CAU Layers</p>
            </div>
         </div>   
        
          <div class="instructions"> 
                <p class="instruct_title">Layer order note:</p>
                <p class="instruct_text">Layers are drawn as you select them, newest on top of oldest. To change the order, simply toggle a layer off and then on again to make it appear on "top".</p>
            </div>

 
        <!-- include cartodb.js library -->
        <script src="http://libs.cartocdn.com/cartodb.js/v3/3.13/cartodb.js" type="text/javascript"></script> 
 
        <!--[if lte IE 8]>
        <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v2/themes/css/cartodb.ie.css" />
        <![endif]-->
 
 

        <script type="text/javascript">
            window.onload = function () {

                // Instantiate new map object, place it in 'map' element
                var map_object = new L.Map('map', {
                    center: [40.7033127,-73.979681], // New York, NY
                    zoom: 11,
                    maxZoom: 16,
                    minZoom: 10,
                    scrollWheelZoom: false   // to keep from zooming  accidentally

                });

                L.tileLayer('http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map_object);




// ***********************************************************************
// Leaflet boundary overlays using cartodb.createLayer and .addTo() method

var neighborhoods = cartodb.createLayer(map_object, {
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                      sql: "SELECT * FROM neighborhoods",
                      cartocss: "#layer { polygon-fill: #000000; polygon-opacity: 0; line-color: #000000; line-width: 2; line-opacity: 1;}",
                      interactivity: "cartodb_id" }]
                    });
    var l_neighborhoods = new L.LayerGroup();
    neighborhoods.addTo(l_neighborhoods);


var neigh_labels = cartodb.createLayer(map_object, {
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                      sql: "SELECT * FROM neighborhoods",
                      cartocss: "#layer::labels [zoom >=11]{ polygon-fill: #fff; polygon-opacity: 0; line-width: 0; line-opacity: 0;  text-name: [ntaname3];  text-face-name: 'Lato Bold';  text-size: 9;  text-fill: #333333;  text-opacity: 0.8;  text-halo-fill: #FFF;  text-halo-radius: 0.7;  text-transform: uppercase;  text-wrap-width: 50;  text-wrap-before: true; text-character-spacing: 1.1;  text-allow-overlap:false;  text-placement-type: simple;  text-placements: 'W,E,N,12';  text-label-position-tolerance:5;  text-min-distance:10; }",
                      interactivity: "cartodb_id" }]
                    });
    var l_neigh_labels = new L.LayerGroup();
    neigh_labels.addTo(l_neigh_labels);


var nycc = cartodb.createLayer(map_object, {
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                      sql: "SELECT * FROM nycc",
                      cartocss: "#layer{ polygon-fill: #000000; polygon-opacity: 0; line-color: #000000; line-width: 3; line-opacity: 1; }",
                      interactivity: "cartodb_id"}]
                  });
      var l_nycc = new L.LayerGroup();
      nycc.addTo(l_nycc);  

var nycd = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/3f321284-29b0-11e5-a0f8-0e018d66dc29/viz.json');
      var l_nycd = new L.LayerGroup();
      nycd.addTo(l_nycd); 

var nyss = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/394257cc-2a5e-11e5-9e3f-0e853d047bba/viz.json');
      var l_nyss = new L.LayerGroup();
      nyss.addTo(l_nyss); 

var nyad = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/8aa5a57e-2a5e-11e5-9807-0e9d821ea90d/viz.json');
      var l_nyad = new L.LayerGroup();
      nyad.addTo(l_nyad); 

var nycg = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/d0fb1b72-2a5d-11e5-a731-0e4fddd5de28/viz.json');
      var l_nycg = new L.LayerGroup();
      nycg.addTo(l_nycg); 

var censustract = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/8e9dcb04-9821-11e4-a998-0e9d821ea90d/viz.json');
      var l_censustract = new L.LayerGroup();
      censustract.addTo(l_censustract); 

var school_zone = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/0546aec0-2a7f-11e5-9807-0e9d821ea90d/viz.json');
      var l_school_zone = new L.LayerGroup();
      school_zone.addTo(l_school_zone); 

var nybb = cartodb.createLayer(map_object, {
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                        sql: "SELECT * FROM nybb",
                        cartocss: "#layer { polygon-fill: #FFFFFF;  polygon-opacity: 0;  line-color: #000000;  line-width: 3;  line-opacity: 1; }",
                        interactivity: "cartodb_id"}]
                        });
      var l_nybb = new L.LayerGroup();
      nybb.addTo(l_nybb); 
                            

var precincts = cartodb.createLayer(map_object, 'https://ashron24.cartodb.com/api/v2/viz/2fe813da-3d35-11e5-8497-0e0c41326911/viz.json');
      var l_precincts = new L.LayerGroup();
      precincts.addTo(l_precincts); 

// group list for layer selector - list items appear in the order below: 
var boundaries_group = {
                      "<span class='my-layer-item-blue'>Boroughs</span>": l_nybb,
                      "<span class='my-layer-item-blue'>Neighborhoods</span>": l_neighborhoods,
                      "<span class='my-layer-item-italic'>Neighborhood Labels</span>": l_neigh_labels, 
                      "<span class='my-layer-item-blue'>Community Districts</span>": l_nycd,
                      "<span class='my-layer-item-blue'>City Council</span>": l_nycc,
                      "<span class='my-layer-item-blue'>NY State Senate</span>": l_nyss,
                      "<span class='my-layer-item-blue'>NY State Assembly</span>": l_nyad,
                      "<span class='my-layer-item-blue'>US Congressional</span>": l_nycd,
                      "<span class='my-layer-item-blue'>2010 Census Tracts</span>": l_censustract,
                      "<span class='my-layer-item-blue'>DOE School Zones</span>": l_school_zone,
                      "<span class='my-layer-item-blue'>Police Precincts</span>": l_precincts
                    };
   
  L.control.layers(null, boundaries_group, {collapsed: false, position:'topright', autoZIndex: false}).addTo(map_object);





// ***********************************************************************
// Leaflet boundary overlays using cartodb.createLayer and .addTo() method

var foreign_born_choro = cartodb.createLayer(map_object, {   //foreign born
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                      sql: "SELECT * FROM tracttemp",
                      cartocss: "#tracttemp  {  polygon-fill: #FFFFB2;  polygon-opacity: 0.8;   line-color: #FFF;  line-width: 0.5;  line-opacity: 1; } #tracttemp [ foreignbor <= 8512] {  polygon-fill: #BD0026; } #tracttemp [ foreignbor <= 2314] {   polygon-fill: #F03B20; } #tracttemp [ foreignbor <= 1596] {   polygon-fill: #FD8D3C; } #tracttemp [ foreignbor <= 1076] {   polygon-fill: #FECC5C; } #tracttemp [ foreignbor <= 649] {  polygon-fill: #FFFFB2; }",
                      interactivity: "cartodb_id" }] 
                    });
    var l_foreign_born_choro = new L.LayerGroup();
    foreign_born_choro.addTo(l_foreign_born_choro);

var turkish_graduated = cartodb.createLayer(map_object, 'https://ashron2224.cartodb.com/api/v2/viz/90b2c52e-2b11-11e5-bd2c-0e853d047bba/viz.json');
    var l_turkish_graduated = new L.LayerGroup();
    turkish_graduated.addTo(l_turkish_graduated);


var black_hh_choro = cartodb.createLayer(map_object, {  //black HH
                    user_name: 'andrewmartini',
                    type: 'cartodb',
                    sublayers: [{
                      sql: "SELECT * FROM tracttemp",
                      cartocss: "#tracttemp {  polygon-fill: #FFFFB2;  polygon-opacity: 0.8; line-color: #FFF;  line-width: 0.5; line-opacity: 1; } #tracttemp [ blackhh <= 7344] { polygon-fill: #BD0026; } #tracttemp [ blackhh <= 1061] { polygon-fill: #F03B20;} #tracttemp [ blackhh <= 663] {  polygon-fill: #FD8D3C; } #tracttemp [ blackhh <= 405] {  polygon-fill: #FECC5C; } #tracttemp [ blackhh <= 174] {   polygon-fill: #FFFFB2; }",
                      interactivity: "cartodb_id"}]
                  });
    var l_black_hh_choro = new L.LayerGroup();
    black_hh_choro.addTo(l_black_hh_choro);

var median_inc_choro = cartodb.createLayer(map_object, {   //median hh income
                        user_name: 'andrewmartini',
                        type: 'cartodb',
                        sublayers: [{
                          sql: "SELECT * FROM tracttemp",
                          cartocss: "#tracttemp { polygon-fill: #1a9850;  polygon-opacity: 0.8;  line-color: #FFF;  line-width: 0.5;  line-opacity: 1; } #tracttemp [ medianhhin <= 243622] {  polygon-fill: #d73027; } #tracttemp [ medianhhin <= 84240] {  polygon-fill: #f79272; } #tracttemp [ medianhhin <= 67394] {   polygon-fill: #fed6b0; } #tracttemp [ medianhhin <= 57176] {  polygon-fill: #fff2cc; } #tracttemp [ medianhhin <= 48159] { polygon-fill: #d2ecb4; } #tracttemp [ medianhhin <= 39538] {   polygon-fill: #8cce8a; } #tracttemp [ medianhhin <= 30106] { polygon-fill: #1a9850; }",
                        interactivity: "cartodb_id"}]
                      });
    var l_median_inc_choro  = new L.LayerGroup();
    median_inc_choro.addTo(l_median_inc_choro);

var employ_foodserv_choro = cartodb.createLayer(map_object, {  //empl food serv
                      user_name: 'andrewmartini',
                      type: 'cartodb',
                      sublayers: [{
                        sql: "SELECT * FROM tracttemp",
                        cartocss: "#tracttemp {   polygon-fill: #EDF8FB;   polygon-opacity: 0.8;   line-color: #FFF;   line-width: 0.5;   line-opacity: 1; } #tracttemp [ empfoodser <= 1326] {    polygon-fill: #005824; } #tracttemp [ empfoodser <= 448] {    polygon-fill: #238B45; } #tracttemp [ empfoodser <= 307] {    polygon-fill: #41AE76; } #tracttemp [ empfoodser <= 221] {    polygon-fill: #66C2A4; } #tracttemp [ empfoodser <= 160] {    polygon-fill: #CCECE6; } #tracttemp [ empfoodser <= 107] {    polygon-fill: #D7FAF4; } #tracttemp [ empfoodser <= 54] {    polygon-fill: #EDF8FB; }",
                      interactivity: "cartodb_id"}]
                    });
    var l_employ_foodserv_choro  = new L.LayerGroup();
    employ_foodserv_choro.addTo(l_employ_foodserv_choro);

var high_school_choro_pct = cartodb.createLayer(map_object, {   //high school percent
                      user_name: 'andrewmartini',
                      type: 'cartodb',
                      sublayers: [{
                        sql: "SELECT highschool, popover24, the_geom, the_geom_webmercator,  ((highschool) *1.0 / popover24*1.0) *100 AS hs_percent FROM tracttemp WHERE popover24 > 50",
                        cartocss: "#tracttemp{   polygon-fill: #F1E6F1;   polygon-opacity: 0.8;   line-color: #FFF;   line-width: 0.5;   line-opacity: 1; } #tracttemp [ hs_percent <= 56.8999345977763] {    polygon-fill: #8A4E8A; } #tracttemp [ hs_percent <= 34.3586767266396] {    polygon-fill: #A05AA0; } #tracttemp [ hs_percent <= 29.0862656072645] {    polygon-fill: #B379B3; } #tracttemp [ hs_percent <= 24.5728234336859] {    polygon-fill: #D8BBD8; } #tracttemp [ hs_percent <= 18.3518705763397] {    polygon-fill: #F1E6F1; }",
                      interactivity: "cartodb_id"}]
                    });
    var l_high_school_choro_pct  = new L.LayerGroup();
    high_school_choro_pct.addTo(l_high_school_choro_pct);

var high_school_choro_num = cartodb.createLayer(map_object, {   //high school
                      user_name: 'andrewmartini',
                      type: 'cartodb',
                      sublayers: [{
                        sql: "SELECT * FROM tracttemp",
                        cartocss: "#tracttemp{   polygon-fill: #FFFFB2;   polygon-opacity: 0.8;   line-color: #FFF;   line-width: 0.5;   line-opacity: 1; } #tracttemp [ highschool <= 6069] {    polygon-fill: #B10026; } #tracttemp [ highschool <= 1200] {    polygon-fill: #E31A1C; } #tracttemp [ highschool <= 932] {    polygon-fill: #FC4E2A; } #tracttemp [ highschool <= 744] {    polygon-fill: #FD8D3C; } #tracttemp [ highschool <= 572] {    polygon-fill: #FEB24C; } #tracttemp [ highschool <= 409] {    polygon-fill: #FED976; } #tracttemp [ highschool <= 239] {    polygon-fill: #FFFFB2; }",
                      interactivity: "cartodb_id"}]
                    });
    var l_high_school_choro_num = new L.LayerGroup();
    high_school_choro_num.addTo(l_high_school_choro_num); 

var muslim_lang_choro = cartodb.createLayer(map_object, {   // kids speaking potential muslim languages
                      user_name: 'andrewmartini',
                      type: 'cartodb',
                      sublayers: [{
                        sql: "SELECT * FROM schlang_merge_04_30",
                        cartocss: "#schlang_merge_04_30 { polygon-fill: #EDF8FB; polygon-opacity: 0.8;  line-color: #FFF;  line-width: 0.5;  line-opacity: 1; } #schlang_merge_04_30 [ _mus4_pct <= 0.49] {  polygon-fill: #005824; } #schlang_merge_04_30 [ _mus4_pct <= 0.29] {  polygon-fill: #238B45; } #schlang_merge_04_30 [ _mus4_pct <= 0.22] {  polygon-fill: #41AE76; } #schlang_merge_04_30 [ _mus4_pct <= 0.17] {  polygon-fill: #66C2A4; } #schlang_merge_04_30 [ _mus4_pct <= 0.12] {  polygon-fill: #CCECE6; } #schlang_merge_04_30 [ _mus4_pct <= 0.08] {  polygon-fill: #D7FAF4; } #schlang_merge_04_30 [ _mus4_pct <= 0.04] { polygon-fill: #EDF8FB; }",
                      interactivity: "cartodb_id"}]
                    });
    var l_muslim_lang_choro = new L.LayerGroup();
    muslim_lang_choro.addTo(l_muslim_lang_choro); 


                            
              var demographics = {
                      "Number Foreign Born": l_foreign_born_choro,
                      "Turkish":l_turkish_graduated, 
                      "Black Households": l_black_hh_choro,
                      "Median HH Income": l_employ_foodserv_choro,
                      "Empl. Food Service": l_employ_foodserv_choro,
                      "<span class='my-layer-item-red'>Pct High School</span>": l_high_school_choro_pct,
                      "Num High School": l_high_school_choro_num,
                      "Muslim School Lang": l_muslim_lang_choro
                };

                L.control.layers(null, demographics, {collapsed: false, position:'topright', autoZIndex:false}).addTo(map_object);
               




//******************************************************
// GROUP C USING  the 'un-nested' / addTo()  method 


  var rentreg = cartodb.createLayer(map_object, 'https://ashron24.cartodb.com/api/v2/viz/3c71fd52-2bfe-11e5-9348-0e0c41326911/viz.json'); 
          var l_rentreg = new L.LayerGroup();
          rentreg.addTo(l_rentreg);

  var nails = cartodb.createLayer(map_object, 'https://ashron24.cartodb.com/api/v2/viz/9cd21ef2-2bfe-11e5-9adf-0e4fddd5de28/viz.json'); 
          var l_nails = new L.LayerGroup();
          nails.addTo(l_nails);

  var cbori = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/4a36bc10-1444-11e5-84c6-0e853d047bba/viz.json'); 
          var l_cbori = new L.LayerGroup();
          cbori.addTo(l_cbori);

  var subways = cartodb.createLayer(map_object, 'https://andrewmartini.cartodb.com/api/v2/viz/77a3e3a4-2aaf-11e5-8077-0e9d821ea90d/viz.json'); 
          var l_subways = new L.LayerGroup();
          subways.addTo(l_subways);


  var vision_zero = cartodb.createLayer(map_object, 'https://ashron24.cartodb.com/api/v2/viz/5f2fe1a8-2f12-11e5-8b7e-0e0c41326911/viz.json'); 
          var l_vision_zero = new L.LayerGroup();
          vision_zero.addTo(l_vision_zero);

  var id_ny = cartodb.createLayer(map_object, 'https://ashron24.cartodb.com/api/v2/viz/9f718712-2c06-11e5-95bd-0e9d821ea90d/viz.json'); 
          var l_id_ny = new L.LayerGroup();
          id_ny.addTo(l_id_ny);


var cau_events = cartodb.createLayer(map_object, 'https://ashron2224.cartodb.com/api/v2/viz/8bcbcfa4-354a-11e5-9b8e-0e4fddd5de28/viz.json'); 
          var l_cau_events = new L.LayerGroup();
          cau_events.addTo(l_cau_events);

  
  var nonengspan = cartodb.createLayer(map_object, {
            user_name: 'andrewmartini',
            type: 'cartodb',
            sublayers: [{
               sql: 'select * from schlang_merge_05_04',
               cartocss: "#layer {  polygon-opacity: 0.7;  line-color: #FFF;  line-width: 1;  line-opacity: 1;  }   /** language group polygon fill */  #schlang_merge_05_04[_plurnes_gr='Sino-Tibetan: Chinese'] {  polygon-fill: #ff0000;  }  #schlang_merge_05_04[_plurnes_gr='South Asian'] {  polygon-fill: #ffa500;  }  #schlang_merge_05_04[_plurnes_gr='E & SE Asia: other'] {  polygon-fill: #fb9a99;  }  #schlang_merge_05_04[_plurnes_gr='Austronesian: Malayo-Polynesian'] {  polygon-fill: #fb9a99;  } #schlang_merge_05_04[_plurnes_gr='Afro-Asiatic: Semitic'] {  polygon-fill: #49db40;  }  #schlang_merge_05_04[_plurnes_gr='Niger-Congo: Atlantic-Congo'] {  polygon-fill: #136400;  }  #schlang_merge_05_04[_plurnes_gr='Niger-Congo: Mande'] {  polygon-fill: #229A00;  }   #schlang_merge_05_04[_plurnes_gr='French Creoles'] {  polygon-fill: #A53ED5;  }  #schlang_merge_05_04[_plurnes_gr='Indo-European: Balto-Slavic'] {  polygon-fill: #0000a0;  }  #schlang_merge_05_04[_plurnes_gr='Indo-European: Romance'] {  polygon-fill: #5CA2D1;  }  #schlang_merge_05_04[_plurnes_gr='Indo-European: Germanic'] {  polygon-fill: #5CA2D1;  }  #schlang_merge_05_04[_plurnes_gr='Indo-European: Other'] {  polygon-fill: #00ceff;   }  #schlang_merge_05_04[_plurnes_gr='Uralic'] {  polygon-fill: #00ceff;  }   #schlang_merge_05_04 {  polygon-fill: #DDDDDD;  }   /** language labels for plurnes */  #schlang_merge_05_04::labels [zoom >= 12] { text-name: [_plurnes]; text-face-name: 'Lato Bold'; text-size: 10; text-wrap-before: true; text-wrap-width: 20;  text-transform: capitalize; text-label-position-tolerance: 10; text-fill: #000; text-halo-fill: #FFF; text-halo-radius: 1; text-dy: 0; text-allow-overlap: false; text-placement: point; text-placement-type: simple;  }   #schlang_merge_05_04::labels [zoom >= 13]      { text-name: [_plurnes]+' '+[_plurnes_qt]; text-face-name: 'Lato Bold'; text-size: 11;  }   #schlang_merge_05_04::labels [zoom >= 14]  { text-name: [_plurnes]+' '+[_plurnes_qt]; text-face-name: 'Lato Bold'; text-size: 13;  } #schlang_poly_v3_1::labels [_plurnes_qt < 9]{   text-name: [_plurnes_qt];   text-face-name: 'Lato Bold';   text-size: 0;   text-fill: #fff;   text-halo-radius: 0; }",
               interactivity: 'cartodb_id'}]
          });
         var l_nonengspan = new L.LayerGroup();
         nonengspan.addTo(l_nonengspan);


    var nycha = cartodb.createLayer(map_object, {
            user_name: 'andrewmartini',
            type: 'cartodb',
            sublayers: [{
               sql: 'SELECT * FROM nycha_developments_july2011',
               cartocss: "#layer{    polygon-fill: #0700ff;    polygon-opacity: 0.9;    line-color: #FFF;    line-width: 0;    line-opacity: 0;  }    #nycha_developments_july2011::labels [zoom >= 12] [tot_pop11 > 4000] {    text-name: [developmen];    text-face-name: 'Lato Bold';    text-size: 10;    text-label-position-tolerance: 10;    text-fill: #11002F;    text-halo-fill: #FFF;    text-halo-radius: 1;    text-dy: 0;    text-wrap-width: 120;    text-wrap-before: true;    text-character-spacing: 1.5;    text-allow-overlap: false;    text-placement: point;    text-placement-type: simple;    }    #nycha_developments_july2011::labels [zoom >= 13] [tot_pop11 > 1000] {    text-name: [developmen];    text-face-name: 'DejaVu Sans Book';    text-size: 10;    text-label-position-tolerance: 10;    text-fill: #000;    text-halo-fill: #FFF;    text-halo-radius: 1;    text-dy: 0;    text-wrap-width: 150;    text-wrap-before: true;    text-character-spacing: 2;    text-allow-overlap: false;    text-placement: point;    text-placement-type: simple;    }    #nycha_developments_july2011::labels [zoom >= 14] [tot_pop11 > 500] {    text-name: [developmen];    text-face-name: 'DejaVu Sans Book';    text-size: 11;    text-label-position-tolerance: 10;    text-fill: #000;    text-halo-fill: #FFF;    text-halo-radius: 1;    text-dy: 0;    text-wrap-width: 160;    text-wrap-before: true;    text-character-spacing: 2;    text-allow-overlap: false;    text-placement: point;    text-placement-type: simple;    }    #nycha_developments_july2011::labels [zoom >= 15] [tot_pop11 > 100] {    text-name: [developmen];    text-face-name: 'DejaVu Sans Book';    text-size: 12;    text-label-position-tolerance: 10;    text-fill: #000;    text-halo-fill: #FFF;    text-halo-radius: 1;    text-dy: 0;    text-wrap-width: 200;    text-wrap-before: true;    text-character-spacing: 2;    text-allow-overlap: false;    text-placement: point;    text-placement-type: simple;    }    #nycha_developments_july2011::labels [zoom >= 15] [tot_pop11 > 100] {    text-name: [developmen];    text-face-name: 'DejaVu Sans Book';    text-size: 12;    text-label-position-tolerance: 10;    text-fill: #000;    text-halo-fill: #FFF;    text-halo-radius: 1;      }    #nycha_developments_july2011::labels [zoom >= 16] {    text-name: [developmen];    text-face-name: 'DejaVu Sans Book';    text-size: 12;    text-label-position-tolerance: 10;    text-fill: #000;    text-halo-fill: #FFF;    text-halo-radius: 1;    text-dy: 0;    text-wrap-width: 200;    text-wrap-before: true;    text-character-spacing: 2;    text-allow-overlap: false;    text-placement: point;    text-placement-type: simple;    } ",
               interactivity: 'cartodb_id'}]
          });
         var l_nycha = new L.LayerGroup();
         nycha.addTo(l_nycha);


    var caugroup = {
        "<span class='my-layer-item-bold'>CBOs & Religious orgs</span>": l_cbori,
        "Nail Salon // Action": l_nails,
        "Vision Zero": l_vision_zero,
        "NYCHA developments": l_nycha,
        "Subway Lines": l_subways,
        "DOE: Non-English, -Span": l_nonengspan,
        "Rent Regulated Target": l_rentreg,
        "CAU events by Neigh": l_cau_events,
        "ID NY Target Locations": l_id_ny

    };

     L.control.layers(null, caugroup, {collapsed: false, position:'topright', autoZIndex: false}).addTo(map_object);
     //.setZIndex(600);
   // L.Control.CategorizedLayers(null, overlayLayers, {collapsed: false, position:'topright'}).addTo(map_object);


            }



        </script>
    </body>
</html>
